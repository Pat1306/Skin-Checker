<!DOCTYPE html>
<html lang="th">   
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">  
     <title>Skin Checker</title>
     <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>  

     <style>
         body {
         
             margin: 0;
             font-family: "Segoe UI", Arial, sans-serif;
             background: linear-gradient(135deg, #e3f2fd, #e0f7fa);
             min-height: 100vh;
             display: flex;
             justify-content: center;
             align-items: center;
             padding: 16px;
         }
         .card {
             width: 100%;
             max-width: 420px;
             background: #fff;
             border-radius: 18px;
             padding: 24px;
             box-shadow: 0 10px 30px rgba(0,0,0,0.1);
             text-align: center;
         }
         h1 {
             margin: 0 0 8px;
             font-size: 24px;
             color: #0277bd;
         }
         p {
             font-size: 14px;
             color: #555;
             margin-bottom: 20px;
         }
         input[type="file"] {
             display: none;
         }
         .upload-label {
             display: inline-block;
             padding: 12px 25px;
             border: 2px dashed #4facfe;
             border-radius: 12px;
             color: #0277bd;
             cursor: pointer;
             margin-bottom: 20px;
         }
         img {
             max-width: 100%;
             border-radius: 12px;
             margin: 15px 0;
             display: none;
         }
         button {
             font-size: 20px;     
             padding: 12px 30px;  
             cursor: pointer;
         }  
         #btn {
             font-size: 18px;
             padding: 14px 40px;
             background: linear-gradient(135deg, #4facfe, #00f2fe);
             color: white;
             border: none;
             border-radius: 30px;
             cursor: pointer;
             box-shadow: 0 8px 20px rgba(0,180,255,0.3);
             transition: all 0.3s ease;
         }
         #btn:hover {
              transform: translateY(-2px);
              box-shadow: 0 12px 25px rgba(0, 180, 255, 0.4);
         }

          #result {
              margin-top: 20px;
              font-size: 16px;
              color: #333;
         }
         footer {
              margin-top: 15px;
              font-size: 12px;
              color: #888;
         }
     </style>
</head>  


<body>
<div class="card">
  <h1>üß† Skin Checker</h1>
  <p>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</p>

  <label class="upload-label">
    üì∑ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    <input type="file" accept="image/*" onchange="loadImage(event)">
  </label>

  <img id="preview">

  <br>
  <button id="btn" onclick="predict()">üîç Analyze</button>

  <table id="resultTable">
    <tr>
      <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
      <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô (%)</th>
    </tr>
  </table>

  <footer>
    *‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
     ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
     ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÑ‡∏î‡πâ
  </footer>
</div>

<script>
     const MODEL_URL = "https://teachablemachine.withgoogle.com/models/pVuW63Nj6/";

     let model;
     const image = document.getElementById("preview");
     const table = document.getElementById("resultTable");

     

     async function init() {
         model = await tmImage.load(
             MODEL_URL + "model.json",
             MODEL_URL + "metadata.json"
         );
         console.log("MODEL LOADED");
    
     }
     init();

     function loadImage(event) {
          image.src = URL.createObjectURL(event.target.files[0]);
          image.style.display = "block";
          table.style.display = "none";
          
     }
     
  
      async function predict() {
          if (!image.src || image.src === "") {
               document.getElementById("result").innerHTML = "";
               alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô");
               return;
          }

    
          if (!model) {
               alert("Model is loading, please wait");
               return;
          }
           

          const predictions = await model.predict(image); 
          
          showResult(predictions);
     }

    function showResult(predictions) {
       table.style.display = "table";

       table.innerHTML = `
           <tr>
                 <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                 <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô (%)</th>
           </tr>
        `;
         predictions.forEach(p => {
             const row = table.insertRow();
             row.insertCell(0).innerText = p.className;
             row.insertCell(1).innerText = (p.probability * 100).toFixed(2);
         });
  
     }
</script>

</body>
</html>